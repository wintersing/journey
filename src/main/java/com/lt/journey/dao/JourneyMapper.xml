<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lt.journey.dao.JourneyDao">
	<insert id="addJourney" parameterType="java.util.List">
		INSERT IGNORE INTO journey
		(`id`,`location`,`rating`,`rank`,`url`,`country`,title,subtitle,city,imageUrls,tipInfo,
		openingHours,description,price,commentCount,recommend,keyValues,geoPointID)
		values
		<foreach collection="list" item="journeyDes" separator=",">
			(
			#{journey.id},
			#{journey.location},
			#{journey.rating},
			#{journey.rank},
			#{journey.url},
			#{journey.country},
			#{journey.title},
			#{journey.subtitle},
			#{journey.city},
			#{journey.imageUrls},
			#{journey.tipInfo},
			#{journey.openingHours},
			#{journey.description},
			#{journey.price},
			#{journey.commentCount},
			#{journey.recommend},
			#{journey.keyValues, typeHandler=com.lt.commons.utils.mybatis.handler.ArrayTypeHandler},
			(SELECT `id` as `geoPointID` from geopoint where
			`lon` = ${journey.geoPoint.lon} AND `lat` = ${journey.geoPoint.lat}))
		</foreach>
	</insert>
</mapper>